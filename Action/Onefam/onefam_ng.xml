
<html>
  <head>

   <title>[APP_TITLE]</title>
<link rel="icon" href="[DYNACASE_FAVICO]">
<link rel="shortcut icon" href="[DYNACASE_FAVICO]">
<LINK REL="stylesheet" type="text/css" HREF="[CORE_SBASEURL]app=CORE&action=CORE_CSS" >
<LINK REL="stylesheet" type="text/css" HREF="[CORE_SSTANDURL]app=FDL&action=FDL_CSS" >
<script type="text/javascript" src="jquery/jquery.js"></script>
<script type="text/javascript" src="FDL/Layout/underscore.js"></script>
<script type="text/javascript" src="FDL/Layout/backbone.js"></script>
<script type="text/javascript" src="FDL/Layout/multidoc.js"></script>

[CSS:REF]
[JS:REF]


   <style type="text/css">
[CSS:CODE]
.ifonefam {
  width:100%;
  height:100%;
  border:none;
}
   </style>

   <script language="javascript">
function imgborder() {
  for (var i=0; i< document.images.length; i++) {
    document.images[i].style.borderStyle='inset';
  }
}

function ctrlPushed(event) {  
  if (!event) event=window.event;
  if (!event) return false;
  return event.ctrlKey;
}
var selimg=null;
function openiframe(event,th,docid) {
  var wfgtop;
  if (selimg != null) {
    selimg.className='iconone';
    selimg.style.width=[izpx];
    selimg.style.borderLeftStyle='solid';
    selimg.style.borderLeftColor='[COLOR_C5]';
    selimg.style.borderLeftWidth='2px';
  }
  if (th) { th.className='icononesel';
    selimg=th;
    selimg.style.width=[izpx]-4;
  }

  var idf='if_'+docid;
  var nf;
  var reloadlist=false;
  nf=document.getElementById(idf);
  if (nf && (nf.style.display!= 'none')) reloadlist=true;
  var lif=document.getElementsByTagName('iframe');
  for (var i=0;i<lif.length;i++) {
  var classname = lif[i].getAttribute("class");
 	if(classname!='content_frame')
  	{
    lif[i].style.display='none';
   }
  }
  if (nf) {
    if (reloadlist) {
      var isrc;
      if (window.frames[idf]) {
	lif=window.frames[idf].document.getElementsByTagName('frame');
	//      lif=nf.contentDocument.getElementsByTagName('frame');
	if (lif.length >0) {
	  isrc=lif[0].src;
	  window.frames[idf].flist.location.href=isrc;
	}
      }
    }
    nf.style.display='';
  } else {
    var tdi=document.getElementById('tdiframe');
     nf=document.createElement('iframe');
     nf.id=idf;
     nf.name=idf;
     nf.className='ifonefam';
     nf.src='[CORE_STANDURL]&app=GENERIC&action=GENERIC_TAB&famid='+docid+'&catg=0&tab=0&viewfld=no&refresh=no';
     tdi.appendChild(nf);
     [IF ISAPPLEWEBKIT]
     window.setTimeout(function() {nf.style.width='90%';}, 50);
     window.setTimeout(function() {nf.style.width='';}, 100);
     [ENDIF ISAPPLEWEBKIT]
  }
}
function reloadiframe(event,th,docid) {
  var idf='if_'+docid;
  var nf;

  nf=document.getElementById(idf);
  if (nf) {
    nf.style.display='';
    nf.src='[CORE_STANDURL]&app=GENERIC&action=GENERIC_TAB&famid='+docid+'&catg=0&tab=0&viewfld=no&refresh=no';
  } 
  
}
function openfirst(docid) {
  var i=document.getElementById('imgu'+docid);

  if (!i) i=document.getElementById('imgm'+docid);
  if (i) {
    i.onclick.apply(i,[]);
  } else {
    openiframe(null,null,docid)
  }
}

function Start_Multidoc()
{
	MultiDocument = new MultiDocument();
	MultiDocument.setAnchor("#multidoc");
	MultiDocument.setDisplayMode("H");
	
	var final=false;
	var t = window.location.search;
	t.substr(1);
	tab = t.split("&");
	for(var i=0;i<tab.length;i++)
	{
		if(tab[i].indexOf("action")!=-1)
		{
			tab2 = tab[i].split("=");
			for(var j=0;j<tab2.length;j++)
			{
				if(tab2[j]=="ONEFAM_NG")
				{
					var final = true;
				}
			}
		}
	}
}
[IF OPENFAM]
addEvent(window,'load',function zou() {openfirst('[openfam]');})
[ENDIF OPENFAM]
   </script>

 </head>

<body style="width:1OO%;background-color:[ONEFAM_BGCOLOR]" onload="Start_Multidoc()">

<div id="listicon" style="float:left;margin:5px;width:[wcols]px" valign="top">
[BLOCK SELECTMASTER]
<img style="width:[izpx]"
     src="[iconsrc]"  needresize="1"
     onclick="if (ctrlPushed(event)) reloadiframe(event,this,'[idcdoc]'); else openiframe(event,this,'[idcdoc]');"
     onmouseover="if (this.className != 'icononesel') {this.className='icononehi';this.style.width=[izpx]-4;}"
     onmouseout="if (this.className != 'icononesel') {this.className='iconone';this.style.width=[izpx]}"
     class="iconone"
     id="imgm[idcdoc]"
     alt="[ftitle]"
     title="[ftitle]">
[ENDBLOCK SELECTMASTER]

[BLOCK CHOOSEMASTERFAMILIES]
<BR style="clear:both">
<input style="float:left;width:[izpx]px"  type="button" value="+" 
       title="[TEXT:master choose families]" 
       onclick="subwindow(250,350,'onepref','[CORE_STANDURL]&app=[APPNAME]&action=ONEFAM_EDITMASTERPREF')">
[ENDBLOCK CHOOSEMASTERFAMILIES]
[BLOCK SEPARATOR]
<HR style="float:left;clear:both" width="100%">
[ENDBLOCK SEPARATOR]
[BLOCK SELECTUSER]
<img style="width:[izpx]"
     src="[iconsrc]"  needresize="1"
     id="imgu[idcdoc]"
     onclick="if (ctrlPushed(event)) reloadiframe(event,this,'[idcdoc]'); else openiframe(event,this,'[idcdoc]');"
     onmouseover="if (this.className != 'icononesel') {this.className='icononehi';this.style.width=[izpx]-4;}"
     onmouseout="if (this.className != 'icononesel') {this.className='iconone';this.style.width=[izpx]}"
     class="iconone"
     alt="[ftitle]"
     title="[ftitle]">
[ENDBLOCK SELECTUSER]

[BLOCK CHOOSEUSERFAMILIES]
<input style="float:left;width:[izpx]px" type="button" value="+" 
       title="[TEXT:choose user families]" 
       onclick="subwindow(250,350,'onepref','[CORE_STANDURL]&app=[APPNAME]&action=ONEFAM_EDITPREF')">
[ENDBLOCK CHOOSEUSERFAMILIES]
<BR style="clear:both">
</div>

<div id="tdiframe" style="float:left; width:30%"></div>
<div style="position:absolute;bottom:5px;right:10px;"><a onclick='window.parent.MultiDocument.setDisplayMode("V")'>Vertical Mode</a> // <a onclick='window.parent.MultiDocument.setDisplayMode("H")'>Horizontal Mode</a> // <a onclick='window.parent.MultiDocument.resetMultiDoc()'>Close all</a></div>

<div id="multidoc" style="margin-left:2px;border-left:2px solid grey;padding-left:3px;float:left; width:65%"></div>
</body>
</html>
